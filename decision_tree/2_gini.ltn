{"creationTime":1644759811409,"name":"notebook","chunks":[{"name":"NotebookFiles","data":{"files":[{"dataUri":"data:text/plain;base64,IyDQoNCw0YHRh9C40YLQsNGC0Ywg0LjQvdC00LXQutGBINCU0LbQuNC90Lgg0LTQu9GPINC00LDQvdC90L7Qs9C+INGA0LDQt9C00LXQu9C10L3QuNGPCiMg0Y3RgtCwINGA0LXQsNC70LjQt9Cw0YbQuNGPINC/0L7Qt9Cy0L7Qu9GP0LXRgiDRgNCw0LHQvtGC0LDRgtGMINGBINC70Y7QsdGL0Lwg0LrQvtC70LjRh9C10YHRgtCy0L7QvCDRgNCw0LfQtNC10LvQtdC90LjQuQpkZWYgZ2luaV9pbmRleChncm91cHMsICAjINGB0L/QuNGB0L7QuiDQv9C+0LTQstGL0LHQvtGA0L7QugogICAgICAgICAgICAgICBjbGFzc2VzICAjINGB0L/QuNGB0L7QuiDQstGB0LXRhSDQstC+0LfQvNC+0LbQvdGL0YUg0LrQu9Cw0YHRgdC+0LIKICAgICAgICAgICAgICAgKToKICAgICMg0L/QvtGB0YfQuNGC0LDRgtGMINC60L7Qu9C40YfQtdGB0YLQstC+INGN0LvQtdC80LXQvdGC0L7QsiDQsiDQv9C+0LTQstGL0LHQvtGA0LrQsNGFCiAgICB0b3RhbF9zYW1wbGVzID0gc3VtKFtsZW4oZ3JvdXApIGZvciBncm91cCBpbiBncm91cHNdKQoKICAgICMg0YHRg9C80LzQsCDQuNC90LTQtdC60YHQvtCyINCU0LbQuNC90Lgg0LTQu9GPINCy0YHQtdGFINC/0L7QtNCy0YvQsdC+0YDQvtC6CiAgICBnaW5pID0gMAoKICAgIGZvciBncm91cCBpbiBncm91cHM6ICAjINC00LvRjyDQutCw0LbQtNC+0Lkg0L/QvtC00LLRi9Cx0L7RgNC60LgKCiAgICAgICAgZ3JvdXBfc2l6ZSA9IGxlbihncm91cCkKCiAgICAgICAgaWYgZ3JvdXBfc2l6ZSA9PSAwOgogICAgICAgICAgICAjINCyINGB0LvRg9GH0LDQtSwg0LXRgdC70Lgg0L/QvtC00LLRi9Cx0L7RgNC60LAg0YDQsNCy0L3QsCDQvdGD0LvRjiwg0L3QtdGCINGB0LzRi9GB0LvQsCDRgdGH0LjRgtCw0YLRjAogICAgICAgICAgICAjINC4INGH0YLQvtCx0Ysg0LjQt9Cx0LXQttCw0YLRjCDQvtGI0LjQsdC60Lgg0LTQtdC70LXQvdC40Y8g0L3QsCDQvdC+0LvRjCwKICAgICAgICAgICAgIyDQt9Cw0LLQtdGA0YjQsNC10Lwg0Y3RgtC+0YIg0YbQuNC60LssINC90LDRh9C40L3QsNC10Lwg0YHQu9C10LTRg9GO0YnQuNC5CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgc2NvcmUgLSDRgdGD0LzQvNCwINC60LLQsNC00YDQsNGC0L7QsiDQv9GA0L7Qv9C+0YDRhtC40LkKICAgICAgICBzY29yZSA9IDAKCiAgICAgICAgZm9yIGNsYXNzX3ZhbCBpbiBjbGFzc2VzOgogICAgICAgICAgICAjINGA0LDRgdGH0LjRgtGL0LLQsNC10Lwg0LIg0LLRi9Cx0L7RgNC60LUg0L/RgNC+0L/QvtGA0YbQuNC4INC00LvRjyDQutCw0LbQtNC+0LPQviDQutC70LDRgdGB0LAKICAgICAgICAgICAgY2xhc3NfY291bnQgPSBbb2JbLTFdIGZvciBvYiBpbiBncm91cF0uY291bnQoY2xhc3NfdmFsKQogICAgICAgICAgICBwcm9wb3J0aW9uID0gY2xhc3NfY291bnQgLyBncm91cF9zaXplCiAgICAgICAgICAgICMg0YHRg9C80LzQuNGA0YPQtdC8INC60LLQsNC00YDQsNGC0Ysg0L/RgNC+0L/QvtGA0YbQuNC4CiAgICAgICAgICAgIHNjb3JlICs9IHByb3BvcnRpb24gKiBwcm9wb3J0aW9uCgogICAgICAgICMg0L/RgNC40LHQsNCy0LvRj9C10Lwg0LjQvdC00LXQutGBINCU0LbQuNC90Lgg0LTQu9GPINC00LDQvdC90L7QuSDQv9C+0LTQstGL0LHQvtGA0LrQuAogICAgICAgICMg0Log0LjRgtC+0LPQvtCy0L7QvNGDINC30L3QsNGH0LXQvdC40Y4g0LjQvdC00LXQutGB0LAg0JTQttC40L3QuAogICAgICAgIGdpbmkgKz0gKDEgLSBzY29yZSkgKiAoZ3JvdXBfc2l6ZSAvIHRvdGFsX3NhbXBsZXMpCgogICAgcmV0dXJuIGdpbmkgICMg0LLQtdGA0L3Rg9GC0Ywg0LrRgNC40YLQtdGA0LjQuSDQtNC20LjQvdC4INC00LvRjyDQtNCw0L3QvdC+0LPQviDRgNCw0LfQtNC10LvQtdC90LjRjwo=","name":"gini.py","type":"text/plain","lastModified":1624459674000},{"dataUri":"data:text/plain;base64,IyDQv9GA0L7RgtC10YHRgtC40YDRg9C10Lwg0YDQtdCw0LvQuNC30LDRhtC40Y4g0L3QsCDQv9GA0LjQvNC10YDQsNGFLCDRh9GC0L4g0LzRiyDRgNCw0YHRgdC80LDRgtGA0LjQstCw0LvQuCDQstGL0YjQtQoKIyDRjdGC0L4g0L/RgNC40LzQtdGAINC40LTQtdCw0LvRjNC90L7Qs9C+INGA0LDQt9Cx0LjQtdC90LjRjwpwcmludCgi0YDQsNC30LHQuNC10L3QuNC1IOKEljE6IGdpbmk9IiwgZ2luaV9pbmRleChbCiAgICBbWzBdLCBbMF1dLCAgIyDQv9C10YDQstCw0Y8g0L/QvtC00LLRi9Cx0L7RgNC60LAgLSDRgtC+0LvRjNC60L4g0LjQtyDQutC70LDRgdGB0L7QsiAiMCIKICAgIFtbMV0sIFsxXV0gICMg0LLRgtC+0YDQsNGPINC/0L7QtNCy0YvQsdC+0YDQutCwIC0g0YLQvtC70YzQutC+INC40Lcg0LrQu9Cw0YHRgdC+0LIgIjEiCl0sIFswLCAxXSAgIyDRgdC/0LjRgdC+0Log0LrQu9Cw0YHRgdC+0LIKKSkKCiMg0Y3RgtC+INC/0YDQuNC80LXRgCDQv9C70L7RhdC+0LPQviDRgNCw0LfQsdC40LXQvdC40Y8gLSDQsiDQutCw0LbQtNC+0Lkg0LLRi9Cx0L7RgNC60LUg0LXRgdGC0Ywg0LrQsNC20LTRi9C5INC60LvQsNGB0YEKcHJpbnQoItGA0LDQt9Cx0LjQtdC90LjQtSDihJYyOiBnaW5pPSIsIGdpbmlfaW5kZXgoWwogICAgW1sxXSwgWzBdXSwgICMg0L/QtdGA0LLQsNGPINC/0L7QtNCy0YvQsdC+0YDQutCwCiAgICBbWzBdLCBbMV1dICAjINCy0YLQvtGA0LDRjyDQv9C+0LTQstGL0LHQvtGA0LrQsApdLCBbMCwgMV0gICMg0YHQv9C40YHQvtC6INC60LvQsNGB0YHQvtCyCikpCg==","name":"test.py","type":"text/plain","lastModified":1624459674000}]},"title":"Files"},{"name":"MarkDownExecutor","data":{"md":"\r\n### Что это такое и зачем оно нам надо?\r\n\r\nКритерий Джини - это критерий ветвления. Он используется при построении дерева решений.\r\n\r\nДерево строится путём разбиения данной выборки на новые подвыборки на каждом узле,\r\nза исключением терминального узла. Чем они отличаются мы рассматривали ранее.\r\n\r\nКритерии ветвления определяют насколько \"хорошо\" была разбита выборка.\r\nРанее мы кратко рассматривали (и ужасались) несколько критериев ветвления.\r\n\r\nДавайте рассморим **критерий Джини** подробнее:\r\n## Критерий Джини\r\n\r\nКритерий джини показывает сколько есть пар объектов, принадлежащих одному и тому же классу,\r\nкоторые вместе идут в левую дочернюю вершину или в правую дочернюю вершину.\r\nТо есть, по итогу, у объектов должны совпадать метки классов и метки предикатов.\r\n\r\nПри идеальном разбиении, значение критерия Джини (индекс джини) принимает значение `0`.\r\nВ хучшем случае, когда элементы одного класса разделены по пропорции 50/50, индекс Джини равен `0.5`.\r\n\r\n\r\n// todo картинка\r\n\r\nФормула для критерия выглядит так:\r\n$$I(\\beta, X^ℓ) = \\sharp \\lbrace (X_i, X_j):\\beta(X_i) = beta(X_j) \\space и \\space Y_i = Y_j \\rbrace $$\r\n\r\nНу выглядит и выглядит. Чё бубнить то. Давайте лучше рассмотрим как она работает на примере:\r\n\r\nДопустим, у нас есть готовое разделение - две подвыборки, в каждой по два элемента.\r\nВ первой подвыборке все объекты пренадлежат классу `0`, во второй все объекты пренадлежат классу `1`,\r\nто есть это идеальное разбиение.\r\n\r\n| подвыборка №1 | подвыборка №2 |\r\n| ------------- | ------------- |\r\n| класс = 0     | класс = 1     |\r\n| класс = 0     | класс = 1     |\r\n\r\nДля начала мы расчитаем пропорции классов в каждой подвыборке:\r\n```\r\nclass_count = количество элементов данного класса в подвыборке\r\ngroup_size = количество элементов всего в подвыборке\r\nproportion = class_count / group_size\r\n\r\nв подвыборке 1:\r\nclass_0 = 2 / 2 = 1\r\nclass_1 = 0 / 2 = 0\r\n\r\nв подвыборке 2:\r\nclass_0 = 0 / 2 = 0\r\nclass_1 = 2 / 2 = 1\r\n```\r\nПо пропорциям расчитываем индекс Джини для подвыборки.\r\n```\r\ntotal_samples = количество элементов всего в обеих подвыборках\r\n\r\ngini = (1 - sum(proportion * proportion)) * (group_size/total_samples)\r\n\r\nв подвыборке 1:\r\ngini_1 = (1 - (1*1 + 0*0))) * 2/4 = 0 * 0.5 = 0\r\n\r\nв подвыборке 2:\r\ngini_2 = (1 - (0*0 + 1*1))) * 2/4 = 0 * 0.5 = 0\r\n```\r\nИндекс Джини для всего разделения можно получить сложив индексы Джини подвыборок: `0 + 0 = 0`.\r\nКак мы и предполагали, он равен нулю. Если интересно, можешь так же расчитать Джини для разделения,\r\nпри котором в каждой подвыборке будут разные классы. Например:\r\n\r\n| подвыборка №1 | подвыборка №2 |\r\n| ------------- | ------------- |\r\n| класс = 1     | класс = 0     |\r\n| класс = 0     | класс = 1     |\r\n\r\nВ итоге должно получиться `0.5`.\r\n\r\n\r\n## Реализация критерия Джини\r\n\r\nДавайте займёмся реализацией критерия ветвления Джини на языке программирования Python3.\r\nДля начала определимся со структурой записи параметров объектов.\r\n\r\nПусть у нас будет табличная запись параметров, а последний столбец будет определять класс объекта.\r\n\r\n| параметр 1 | параметр 2 | ... | параметр n | класс |\r\n| ---------- | ---------- | --- | ---------- |:-----:|\r\n| 100        | 10         | ... | 123321     | 0     |\r\n| 200        | 20         | ... | null       | 0     |\r\n| 300        | +100500    | ... | 1          | 1     |\r\n\r\nкаждая строчка в таблице это один целый объект.\r\n\r\nтеперь сам код:\r\n\r\n<div id=\"editor_1\"></div>\r\n\r\n\r\n### Давай протестируем реализацию:\r\n\r\nВообще, если хочешь, можешь поправить код как сверху, так и снизу и посмотреть как он будет работать **:)**\r\n\r\n\r\n<div id=\"editor_2\"></div>\r\n"},"title":"Markdown","collapsed":true},{"name":"PythonExecutor","data":{"id":"console_1"},"title":"Python console"},{"name":"JSExecutor","data":{"code":"((async() => {\n    \n    let gini_txt = await LTN.files.getFileAsText(\"gini.py\");\n    let test_txt = await LTN.files.getFileAsText(\"test.py\");\n    \n    \n    var editor_1 = ace.edit(\"editor_1\");\n    editor_1.getSession().setValue(gini_txt)\n\teditor_1.getSession().setMode(\"ace/mode/python\");\n\teditor_1.setOptions({maxLines: 60, minLines: 20});\n    \n    \n    var editor_2 = ace.edit(\"editor_2\");\n    editor_2.getSession().setValue(test_txt)\n\teditor_2.getSession().setMode(\"ace/mode/python\");\n\teditor_2.setOptions({maxLines: 60, minLines: 20});\n\n    let code_output_1 = document.getElementById(\"console_1\");\n    code_output_1.attachEditor(editor_2);\n    code_output_1.before_launch = () => {\n        code_output_1.pre_codes = [editor_1.getValue()];\n    }\n    \n})());"},"title":"JavaScript executor"}]}